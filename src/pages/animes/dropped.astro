---
import MainLayout from "@/layout/main.astro";
import { getAnimesWithStatus } from "@/lib/anime/data-access";
import { AnimesWithStatusPage } from "@/components/anime-with-status.page";
import { getRecordsPerPage } from "@/lib/utils/records-per-page";

const entityStatus = "droppped";
const recordsPerPage = getRecordsPerPage(Astro.url.searchParams);
const records = await getAnimesWithStatus(
  entityStatus,
  new URLSearchParams(Astro.url.searchParams),
  recordsPerPage,
  Astro.locals.user?.id,
);
---

<MainLayout title="Animes dropped">
  <AnimesWithStatusPage
    title="Animes dropped"
    url={new URL(Astro.url)}
    records={records}
    entityStatus={entityStatus}
    user={Astro.locals.user}
    client:load
  />
</MainLayout>
