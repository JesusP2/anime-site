---
import MainLayout from "@/layout/main.astro";
import MangaPage from "@/components/manga.page.astro";
import { getManga } from "@/lib/manga/queries";
const mal_id = parseInt(Astro.params.mal_id || "0");
const userId = Astro.locals.user?.id;
const manga = await getManga(Number(mal_id), userId);
---

<MainLayout title="title">
  {
    manga.success ? (
      <MangaPage manga={manga.value} user={Astro.locals.user} />
    ) : (
      <div>Error</div>
    )
  }
</MainLayout>
